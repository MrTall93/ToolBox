apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: tool-registry-k8s
  annotations:
    description: "Kustomization for Tool Registry MCP Server Kubernetes deployment"

resources:
# Core resources
- namespace.yaml
- configmap.yaml
- secrets.yaml
- deployment.yaml
- service.yaml
- postgres.yaml

# Optional resources for production
- ingress.yaml
- hpa.yaml
- network-policy.yaml
- monitoring.yaml
- rbac.yaml

# Common labels
commonLabels:
  app.kubernetes.io/name: tool-registry
  app.kubernetes.io/component: mcp-server
  app.kubernetes.io/version: "v1.0.0"
  app.kubernetes.io/managed-by: "kustomize"

# Common annotations
commonAnnotations:
  app.kubernetes.io/documentation: "https://github.com/your-org/tool-registry"
  app.kubernetes.io/support: "support@yourcompany.com"

# Configurations
configurations:
- dev.yaml
- staging.yaml
- prod.yaml

# Patches for environment-specific modifications
patchesStrategicMerge:
- deployment-patch.yaml

# Image update strategy
images:
- name: tool-registry
  newTag: "v1.0.0"

# Namespace (can be overridden with kustomize edit)
namespace: tool-registry