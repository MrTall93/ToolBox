apiVersion: v1
kind: Secret
metadata:
  name: {{ include "tool-registry.fullname" . }}-secrets
  namespace: {{ .Release.Namespace }}
  labels:
    app: {{ include "tool-registry.name" . }}
    component: secrets
    {{- include "tool-registry.labels" . | nindent 4 }}
type: Opaque
data:
  # Database URL
  DATABASE_URL: {{ include "tool-registry.databaseUrl" . | b64enc }}

  # Secret Key
  SECRET_KEY: {{ .Values.secrets.secretKey | default (include "tool-registry.generateRandomSecret" .) | b64enc }}

  # Embedding API Key
  EMBEDDING_API_KEY: {{ .Values.secrets.embeddingApiKey | default "local-mm-service-api-key" | b64enc }}

  # API Key
  API_KEY: {{ .Values.secrets.apiKey | default "local-dev-api-token" | b64enc }}

  # Database password for PostgreSQL
  DB_PASSWORD: {{ .Values.secrets.dbPassword | default .Values.postgresql.auth.password | default "tool-registry-pass" | b64enc }}